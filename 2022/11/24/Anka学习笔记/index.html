<!DOCTYPE html>
<html lang="zh-CN">
    <head>
    <meta charset="utf-8">

    

    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True" >
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!--icon-->

    
        <link rel="shortcut icon" href="/dist/images/favicon_package/favicon.ico">
    
    
        <link rel="icon" type="image/png" sizes="16x16" href="/dist/images/favicon_package/favicon-16x16.png">
    
    
        <link rel="icon" type="image/png" sizes="32x32" href="/dist/images/favicon_package/favicon-32x32.png">
    
    
        <link rel="apple-touch-icon" sizes="180x180" href="/dist/images/favicon_package/apple-touch-icon.png">
    
    
        <link rel="mask-icon" href="/dist/images/favicon_package/safari-pinned-tab.svg">
    


    <!-- meta -->


<title>【笔记】Anka学习笔记 | 绯鞠的博客</title>





    <!-- OpenGraph -->
 
    <meta name="description" content="前言Anka is a suite of software for creating and managing macOS VMs to run on top of Apple hardware and macOS. It enables creation of macOS VMs and integrates with existing container based DevOps workfl">
<meta property="og:type" content="article">
<meta property="og:title" content="【笔记】Anka学习笔记">
<meta property="og:url" content="https://loli.fj.cn/2022/11/24/Anka%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/index.html">
<meta property="og:site_name" content="绯鞠的博客">
<meta property="og:description" content="前言Anka is a suite of software for creating and managing macOS VMs to run on top of Apple hardware and macOS. It enables creation of macOS VMs and integrates with existing container based DevOps workfl">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2022-11-24T08:32:08.000Z">
<meta property="article:modified_time" content="2024-08-06T02:31:29.746Z">
<meta property="article:author" content="绯鞠">
<meta name="twitter:card" content="summary_large_image">


    
<link rel="stylesheet" href="/css/style/main.css">
 

    
    
        <link rel="stylesheet" id="hl-default-theme" href="/css/highlight/highlight.css" media="none" onload="this.media='all'">
        
    

    
    

    

     
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 

    <!-- custom head -->

<meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="绯鞠的博客" type="application/atom+xml">
</head>

    <body>
        <div id="app" tabindex="-1">
            <header class="header">
    <div class="header__left">
        <a href="/" class="button">
            <span class="logo__text">绯鞠的博客</span>
        </a>
    </div>
    <div class="header__right">
        
            <div class="navbar__menus">
                
                    <a href="/" class="navbar-menu button">首页</a>
                
                    <a href="/about/" class="navbar-menu button">关于</a>
                
                    <a href="/archives/" class="navbar-menu button">归档</a>
                
                    <a href="/links/" class="navbar-menu button">友链</a>
                
                    <a href="/reward/" class="navbar-menu button">赞助</a>
                
                    <a href="/atom.xml" class="navbar-menu button">订阅</a>
                
                    <a target="_blank" rel="noopener" href="//melody.loli.fj.cn" class="navbar-menu button">主题</a>
                
            </div>
        
        
        

        
        

        
            <a class="dropdown-icon button" id="btn-dropdown" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width='24' height='24' fill="none" stroke="currentColor" stroke-width="0.7" stroke-linecap="round" stroke-linejoin="round"><path fill="currentColor" d="M3.314,4.8h13.372c0.41,0,0.743-0.333,0.743-0.743c0-0.41-0.333-0.743-0.743-0.743H3.314c-0.41,0-0.743,0.333-0.743,0.743C2.571,4.467,2.904,4.8,3.314,4.8z M16.686,15.2H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,15.2,16.686,15.2z M16.686,9.257H3.314c-0.41,0-0.743,0.333-0.743,0.743s0.333,0.743,0.743,0.743h13.372c0.41,0,0.743-0.333,0.743-0.743S17.096,9.257,16.686,9.257z"></path></svg></a>
            <div class="dropdown-menus" id="dropdown-menus">
                
                    <a href="/" class="dropdown-menu button">首页</a>
                
                    <a href="/about/" class="dropdown-menu button">关于</a>
                
                    <a href="/archives/" class="dropdown-menu button">归档</a>
                
                    <a href="/links/" class="dropdown-menu button">友链</a>
                
                    <a href="/reward/" class="dropdown-menu button">赞助</a>
                
                    <a href="/atom.xml" class="dropdown-menu button">订阅</a>
                
                    <a target="_blank" rel="noopener" href="//melody.loli.fj.cn" class="dropdown-menu button">主题</a>
                
            </div>
        
    </div>
</header>


            <main class="main">
    

<div class="post-title">
    <h1 class="post-title__text">
        【笔记】Anka学习笔记
    </h1>
    <div class="post-title__meta">
        <a href="/archives/2022/11/" class="post-meta__date button">2022-11-24</a>
        
 
        
    
    


 

 
    </div>
</div>


    <aside class="post-side">
        <div class="post-side__toc">
            <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Anka"><span class="toc-text">安装Anka</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%84%8F%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE"><span class="toc-text">同意许可协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-text">创建虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-text">启动虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8BAnka%E7%89%88%E6%9C%AC"><span class="toc-text">查看Anka版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E4%BB%A5%E5%AE%89%E8%A3%85%E7%9A%84%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC"><span class="toc-text">查看可以安装的系统版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-text">查看虚拟机文件位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%87%E4%BB%B6"><span class="toc-text">删除虚拟机文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%88%90"><span class="toc-text">完成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-text">参考文献</span></a></li></ol>
        </div>
    </aside>
    <a class="btn-toc button" id="btn-toc" tabindex="0">
        <svg viewBox="0 0 1024 1024" width="32" height="32" xmlns="http://www.w3.org/2000/svg">
            <path d="M128 256h64V192H128zM320 256h576V192H320zM128 544h64v-64H128zM320 544h576v-64H320zM128 832h64v-64H128zM320 832h576v-64H320z" fill="currentColor"></path>
        </svg>
    </a>
    <div class="toc-menus" id="toc-menus">
        <div class="toc-title">文章目录</div>
        <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E8%A8%80"><span class="toc-text">前言</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%86%E5%A4%87%E5%B7%A5%E4%BD%9C"><span class="toc-text">准备工作</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E8%A3%85Anka"><span class="toc-text">安装Anka</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%84%8F%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE"><span class="toc-text">同意许可协议</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-text">创建虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%AF%E5%8A%A8%E8%99%9A%E6%8B%9F%E6%9C%BA"><span class="toc-text">启动虚拟机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8BAnka%E7%89%88%E6%9C%AC"><span class="toc-text">查看Anka版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E5%8F%AF%E4%BB%A5%E5%AE%89%E8%A3%85%E7%9A%84%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC"><span class="toc-text">查看可以安装的系统版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%A5%E7%9C%8B%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%87%E4%BB%B6%E4%BD%8D%E7%BD%AE"><span class="toc-text">查看虚拟机文件位置</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E8%99%9A%E6%8B%9F%E6%9C%BA%E6%96%87%E4%BB%B6"><span class="toc-text">删除虚拟机文件</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%8C%E6%88%90"><span class="toc-text">完成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%82%E8%80%83%E6%96%87%E7%8C%AE"><span class="toc-text">参考文献</span></a></li></ol>
    </div>


<article class="post post__with-toc content-card">
    <div class="post__header"></div>
    <div class="post__content">
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>Anka is a suite of software for creating and managing macOS VMs to run on top of Apple hardware and macOS. It enables creation of macOS VMs and integrates with existing container based DevOps workflows for iOS and Native App build &amp; test CI&#x2F;CD&#x2F;Automation. Built on the native Apple hypervisor, it utilizes macOS resource scheduling, performance management, and flexibility. Management of VMs is performed with the Anka Virtualization CLI, UI app, and Build Cloud Controller UI or REST APIs.（<a href="/302.html?target=https://docs.veertu.com/anka/what-is-anka/">官网</a>）</p>
<span id="more"></span>

<h2 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h2><ul>
<li><p><code>.ipsw</code>系统安装包文件：<a target="_blank" rel="noopener" href="https://ipsw.me/">https://ipsw.me</a></p>
</li>
<li><p>如果是在12.x的MacOS上安装13.x的MacOS虚拟机，需要准备Xcode环境</p>
</li>
<li><p>安装完Xcode后需要同意协议并安装驱动</p>
</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo xcodebuild -license accept</span><br><span class="line">sudo xcodebuild -runFirstLaunch</span><br><span class="line">for PKG in $(/bin/ls /Applications/Xcode.app/Contents/Resources/Packages/*.pkg); do</span><br><span class="line">    sudo /usr/sbin/installer -pkg &quot;$PKG&quot; -target /</span><br><span class="line">done</span><br></pre></td></tr></table></figure>

<h2 id="安装Anka"><a href="#安装Anka" class="headerlink" title="安装Anka"></a>安装Anka</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">FULL_FILE_NAME=&quot;$(curl -Ls -r 0-1 -o /dev/null -w %&#123;url_effective&#125; https://veertu.com/downloads/anka-virtualization-apple | cut -d/ -f5)&quot;</span><br><span class="line">curl -S -L -o ./$FULL_FILE_NAME https://veertu.com/downloads/anka-virtualization-apple</span><br><span class="line">sudo installer -pkg $FULL_FILE_NAME -tgt /</span><br></pre></td></tr></table></figure>

<h2 id="同意许可协议"><a href="#同意许可协议" class="headerlink" title="同意许可协议"></a>同意许可协议</h2><ul>
<li>如果是<code>Anka Build</code>或<code>Anka Flow</code>需要同意许可协议</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo anka license accept-eula</span><br></pre></td></tr></table></figure>

<h2 id="创建虚拟机"><a href="#创建虚拟机" class="headerlink" title="创建虚拟机"></a>创建虚拟机</h2><blockquote>
<p><code>-c 4</code>：指定虚拟机CPU核心数，缺省值为4，推荐3个及以上<br><code>-m 4G</code>：指定虚拟机内存大小，缺省值为4G。单位为：<code>K</code>、<code>M</code>、<code>G</code>、<code>T</code><br><code>-d 128G</code>：指定虚拟机硬盘大小，缺省值为128G。单位为：<code>K</code>、<code>M</code>、<code>G</code>、<code>T</code></p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka create -a latest &lt;name&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>等待虚拟机创建完成</li>
</ul>
<h2 id="启动虚拟机"><a href="#启动虚拟机" class="headerlink" title="启动虚拟机"></a>启动虚拟机</h2><blockquote>
<p><code>&lt;name&gt;</code>：指定虚拟机名称</p>
</blockquote>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka start -uv &lt;name&gt;</span><br></pre></td></tr></table></figure>

<h2 id="查看Anka版本"><a href="#查看Anka版本" class="headerlink" title="查看Anka版本"></a>查看Anka版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka version</span><br></pre></td></tr></table></figure>

<h2 id="查看可以安装的系统版本"><a href="#查看可以安装的系统版本" class="headerlink" title="查看可以安装的系统版本"></a>查看可以安装的系统版本</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka create -l</span><br></pre></td></tr></table></figure>

<h2 id="查看虚拟机文件位置"><a href="#查看虚拟机文件位置" class="headerlink" title="查看虚拟机文件位置"></a>查看虚拟机文件位置</h2><ul>
<li>系统镜像包默认的下载位置为<code>~/Library/Application Support/Veertu/Anka/img_lib</code></li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka config img_lib_dir</span><br></pre></td></tr></table></figure>

<h2 id="删除虚拟机文件"><a href="#删除虚拟机文件" class="headerlink" title="删除虚拟机文件"></a>删除虚拟机文件</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anka delete --cache</span><br></pre></td></tr></table></figure>

<h2 id="完成"><a href="#完成" class="headerlink" title="完成"></a>完成</h2><h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p><a target="_blank" rel="noopener" href="https://prinsss.github.io/macos-vm-on-m1-mac/">PRIN BLOG</a><br><a target="_blank" rel="noopener" href="https://docs.veertu.com/anka/apple/">VeertuAnka官方文档</a></p>

    </div>
     
    <div class="post-footer__meta"><p>更新于 2024-08-06</p></div> 
    <div class="post-entry__tags"></div> 
</article>


    <div class="nav">
        <div class="nav__prev">
            
                <a href="/2022/11/24/xcodebuild%E5%91%BD%E4%BB%A4%E6%8A%A5%E9%94%99/" class="nav__link">
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M589.088 790.624L310.464 512l278.624-278.624 45.248 45.248L400.96 512l233.376 233.376z" fill="#808080"></path></svg>
                    </div>
                    <div>
                        <div class="nav__label">
                            上一篇
                        </div>
                        <div class="nav__title">
                            【踩坑】xcodebuild命令报错
                        </div>
                    </div>
                </a>
            
        </div>
        <div class="nav__next">
            
                <a href="/2022/11/23/STC12C5A60S2%E5%BC%95%E8%84%9A%E5%AE%9A%E4%B9%89/" class="nav__link">
                    <div>
                        <div class="nav__label">
                            下一篇
                        </div>
                        <div class="nav__title">
                            【笔记】STC12C5A60S2引脚定义
                        </div>
                    </div>
                    <div>
                        <svg viewBox="0 0 1024 1024" xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M434.944 790.624l-45.248-45.248L623.04 512l-233.376-233.376 45.248-45.248L713.568 512z" fill="#808080"></path></svg>
                    </div>
                </a>
            
        </div>
    </div>



    <div class="post__comments post__with-toc content-card" id="comment">
        
    <h4>评论</h4>
    
    
    
    
    
    
    
    
    
    
    
    
    <div id="tcomment" class="twikoo_thread"></div>

    



    </div>



</main>

            <footer class="footer">
     
    <a href="#" class="button" id="b2t" aria-label="回到顶部" title="回到顶部">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1024 1024" width="32" height="32">
            <path d="M233.376 722.752L278.624 768 512 534.624 745.376 768l45.248-45.248L512 444.128zM192 352h640V288H192z" fill="currentColor"></path>
        </svg>
    </a>

    


    
    
    
        <span id="busuanzi_container_site_uv" hidden>
            <span></span>
            <span id="busuanzi_value_site_uv"></span>
            <span>Viewers</span>
            
                <span>&amp;nbsp;&amp;nbsp;&amp;nbsp;|</span>
            
        </span>
    
    
        <span id="busuanzi_container_site_pv" hidden>
            <span></span>
            <span id="busuanzi_value_site_pv"></span>
            <span>Views</span>
            
        </span>
    
 
 

 
    
        
        <p class="footer-copyright">
            Copyright © 2024 <a href="/">绯鞠的博客</a>
        </p>
    
    
    <p>Powered by <a href="https://hexo.io" target="_blank">Hexo</a> | Theme - <a href="https://github.com/ChrAlpha/hexo-theme-cards" target="_blank">Cards</a></p>
</footer>

        </div>
         

 

 

 

 



 



 


    
 

 

 

 


    <script src='https://cdn.jsdelivr.net/npm/mermaid@8.10.2/dist/mermaid.min.js'></script>
    <script>
            mermaid.initialize(JSON.stringify(''));
    </script>
 

 


    

    

    
    

    
    
    
    
    

    
    
    
    
    

    
    
    
    <script>
        function loadComment() {
            let e;
            (e = document.createElement("script")).src = 'https://cdn.jsdelivr.net/npm/twikoo@0.3.2/dist/twikoo.all.min.js',
            document.body.appendChild(e);
            e.onload = () => {
                twikoo.init({
                    envId: 'https://twikoo.loli.fj.cn',
                    el: '#tcomment'
                });
            };
        }
    
        var runningOnBrowser = typeof window !== "undefined";
        var isBot = runningOnBrowser && !("onscroll" in window) || typeof navigator !== "undefined" && /(gle|ing|ro|msn)bot|crawl|spider|yand|duckgo/i.test(navigator.userAgent);
        var supportsIntersectionObserver = runningOnBrowser && "IntersectionObserver" in window;
    
        setTimeout(function () {
            if (!isBot && supportsIntersectionObserver) {
                var comment_observer = new IntersectionObserver(function(entries) {
                    if (entries[0].isIntersecting) {
                        loadComment();
                        comment_observer.disconnect();
                    }
                }, { threshold: [0] });
                comment_observer.observe(document.getElementById('comment'));
            } else {
                loadComment();
            }
        }, 1);
    </script>




    </body>
</html>
